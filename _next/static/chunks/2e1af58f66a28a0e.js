(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r({activeSim:e,setActiveSim:s,children:r}){let i=[{id:"sorting",label:"Sorting",icon:"ðŸ“Š"},{id:"graph",label:"Graph Search",icon:"ðŸ•¸ï¸"},{id:"maze",label:"Maze Gen",icon:"ðŸŒ€"},{id:"flow",label:"Flow Sim",icon:"ðŸŒŠ"},{id:"fluid",label:"Fluid Dynamics",icon:"ðŸ’§"},{id:"terraforming",label:"Terraforming",icon:"ðŸŒ"},{id:"automata",label:"Game of Life",icon:"ðŸ‘¾"},{id:"physics",label:"Physics Engine",icon:"âš›ï¸"},{id:"universe",label:"Universe",icon:"ðŸŒŒ"}];return(0,t.jsxs)("div",{className:"flex h-screen bg-gray-900 text-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-64 bg-gray-800 border-r border-gray-700 flex flex-col",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,t.jsx)("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"SimPlatform"})}),(0,t.jsx)("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:i.map(r=>(0,t.jsxs)("button",{onClick:()=>s(r.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e===r.id?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[(0,t.jsx)("span",{className:"text-xl",children:r.icon}),(0,t.jsx)("span",{className:"font-medium",children:r.label})]},r.id))}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-700 text-xs text-gray-500 text-center",children:"v2.0 â€¢ Client-Side â€¢ GitHub Pages"})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("header",{className:"h-16 bg-gray-800/50 border-b border-gray-700 flex items-center px-8 backdrop-blur",children:(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-200",children:[i.find(t=>t.id===e)?.label," Viewer"]})}),(0,t.jsx)("main",{className:"flex-1 overflow-auto p-8 bg-black/50",children:r})]})]})}class i{data;generator=null;constructor(e=50){this.data=Array.from({length:e},()=>Math.floor(100*Math.random()))}init(e){this.data=Array.from({length:e},()=>Math.floor(100*Math.random())),this.generator=null}reset(e=50){return e!==this.data.length?this.data=Array.from({length:e},()=>Math.floor(100*Math.random())):this.data=Array.from({length:this.data.length},()=>Math.floor(100*Math.random())),this.generator=null,[...this.data]}*bubbleSort(e){let t=e.length,s=[...e];for(let e=0;e<t;e++){let r=!1;for(let i=0;i<t-e-1;i++)yield{data:[...s],indices:[i,i+1],swapped:[],done:!1},s[i]>s[i+1]&&([s[i],s[i+1]]=[s[i+1],s[i]],r=!0,yield{data:[...s],indices:[i,i+1],swapped:[i,i+1],done:!1});if(!r)break}yield{data:[...s],indices:[],swapped:[],done:!0}}*quickSort(e,t,s){if(t<s){let r=e[s],i=t-1;for(let l=t;l<s;l++)yield{data:[...e],indices:[l,s],swapped:[],done:!1},e[l]<=r&&(i++,[e[i],e[l]]=[e[l],e[i]],yield{data:[...e],indices:[i,l],swapped:[i,l],done:!1});[e[i+1],e[s]]=[e[s],e[i+1]],yield{data:[...e],indices:[i+1,s],swapped:[i+1,s],done:!1};let l=i+1;yield*this.quickSort(e,t,l-1),yield*this.quickSort(e,l+1,s)}0===t&&s===e.length-1&&(yield{data:[...e],indices:[],swapped:[],done:!0})}*mergeSort(e,t,s){if(t<s){let r=Math.floor((t+s)/2);yield*this.mergeSort(e,t,r),yield*this.mergeSort(e,r+1,s),yield*this.merge(e,t,r,s)}0===t&&s===e.length-1&&(yield{data:[...e],indices:[],swapped:[],done:!0})}*merge(e,t,s,r){let i=s-t+1,l=r-s,a=e.slice(t,s+1),n=e.slice(s+1,r+1),o=0,d=0,h=t;for(;o<i&&d<l;)yield{data:[...e],indices:[t+o,s+1+d],swapped:[],done:!1},a[o]<=n[d]?(e[h]=a[o],o++):(e[h]=n[d],d++),yield{data:[...e],indices:[h],swapped:[h],done:!1},h++;for(;o<i;)e[h]=a[o],o++,yield{data:[...e],indices:[h],swapped:[h],done:!1},h++;for(;d<l;)e[h]=n[d],d++,yield{data:[...e],indices:[h],swapped:[h],done:!1},h++}start(e){let t=[...this.data];"bubble"===e?this.generator=this.bubbleSort(t):"quick"===e?this.generator=this.quickSort(t,0,t.length-1):"merge"===e&&(this.generator=this.mergeSort(t,0,t.length-1))}step(){if(!this.generator)return null;let e=this.generator.next();return e.done?{data:this.data,indices:[],swapped:[],done:!0}:e.value}}function l(){let[e]=(0,s.useState)(()=>new i(50)),[r,l]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[o,d]=(0,s.useState)([]),[h,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)("bubble"),[x,f]=(0,s.useState)(50),[b,p]=(0,s.useState)(50);return(0,s.useEffect)(()=>{e.init(b),l(e.reset())},[b]),(0,s.useEffect)(()=>{l(e.reset())},[]),(0,s.useEffect)(()=>{if(!h)return;let t=setInterval(()=>{let t=e.step();t?(l(t.data),n(t.indices),d(t.swapped),t.done&&c(!1)):c(!1)},105-x);return()=>clearInterval(t)},[h,x]),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-6 items-center bg-gray-800 p-4 rounded-xl border border-gray-700",children:[(0,t.jsxs)("select",{value:u,onChange:e=>g(e.target.value),className:"bg-gray-900 border border-gray-600 rounded px-4 py-2 text-white outline-none focus:border-blue-500",children:[(0,t.jsx)("option",{value:"bubble",children:"Bubble Sort"}),(0,t.jsx)("option",{value:"quick",children:"Quick Sort"}),(0,t.jsx)("option",{value:"merge",children:"Merge Sort"})]}),(0,t.jsx)("button",{onClick:()=>{e.reset(),e.start(u),c(!0)},className:"px-6 py-2 bg-green-600 hover:bg-green-700 rounded font-bold transition-colors",disabled:h,children:h?"Sorting...":"Start Visualization"})]}),(0,t.jsxs)("div",{className:"flex gap-6 mb-4 items-center bg-gray-800 px-4 py-2 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"text-sm text-gray-400",children:["Size: ",b]}),(0,t.jsx)("input",{type:"range",min:"10",max:"100",value:b,onChange:e=>p(parseInt(e.target.value)),className:"w-32 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer",disabled:h})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-400",children:"Speed"}),(0,t.jsx)("input",{type:"range",min:"1",max:"100",value:x,onChange:e=>f(parseInt(e.target.value)),className:"w-32 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]})]}),(0,t.jsxs)("div",{className:"flex-1 bg-black rounded-xl border border-gray-700 p-8 flex items-end justify-center gap-1 relative overflow-hidden",children:[r.map((e,s)=>{let r="bg-blue-500";return o.includes(s)?r="bg-red-500":a.includes(s)&&(r="bg-yellow-400"),(0,t.jsx)("div",{className:`flex-1 transition-all duration-75 ${r} rounded-t-sm flex items-end justify-center group`,style:{height:`${e}%`},children:(0,t.jsx)("span",{className:"text-[10px] text-white opacity-0 group-hover:opacity-100 mb-1 font-mono",children:e})},s)}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 text-gray-400 font-mono text-sm",children:["Array Size: ",r.length]})]})]})}class a{nodes;generator=null;constructor(e=20){this.nodes=[],this.init(e)}init(e){this.nodes=[];for(let t=0;t<e;t++)this.nodes.push({id:t,x:80*Math.random()+10,y:80*Math.random()+10,neighbors:[]});for(let t=0;t<e;t++)for(let s=t+1;s<e;s++)30>Math.hypot(this.nodes[t].x-this.nodes[s].x,this.nodes[t].y-this.nodes[s].y)&&(this.nodes[t].neighbors.push(s),this.nodes[s].neighbors.push(t))}addNode(){let e=this.nodes.length;this.nodes.push({id:e,x:80*Math.random()+10,y:80*Math.random()+10,neighbors:[]})}toggleEdge(e,t){let s=this.nodes[e],r=this.nodes[t],i=s.neighbors.indexOf(t);-1!==i?(s.neighbors.splice(i,1),r.neighbors.splice(r.neighbors.indexOf(e),1)):(s.neighbors.push(t),r.neighbors.push(e))}*bfs(e,t){let s=[e],r=new Set,i=new Map;for(r.add(e);s.length>0;){let e=s.shift();if(yield{visited:Array.from(r),path:[],current:e,done:!1},e===t){let e=[t],s=t;for(;i.has(s);)e.unshift(s=i.get(s));yield{visited:Array.from(r),path:e,current:null,done:!0};return}for(let t of this.nodes[e].neighbors)r.has(t)||(r.add(t),i.set(t,e),s.push(t))}yield{visited:Array.from(r),path:[],current:null,done:!0}}*dfs(e,t){let s=[e],r=new Set,i=new Map;for(;s.length>0;){let e=s.pop();if(!r.has(e)){if(r.add(e),yield{visited:Array.from(r),path:[],current:e,done:!1},e===t){let e=[t],s=t;for(;i.has(s);)e.unshift(s=i.get(s));yield{visited:Array.from(r),path:e,current:null,done:!0};return}for(let t of this.nodes[e].neighbors)r.has(t)||(i.set(t,e),s.push(t))}}yield{visited:Array.from(r),path:[],current:null,done:!0}}*dijkstra(e,t){let s=new Map,r=new Map,i=new Set;for(let e of this.nodes)s.set(e.id,1/0),i.add(e.id);s.set(e,0);let l=new Set;for(;i.size>0;){let e=-1,a=1/0;for(let t of i)s.get(t)<a&&(a=s.get(t),e=t);if(-1===e||a===1/0)break;if(i.delete(e),l.add(e),yield{visited:Array.from(l),path:[],current:e,done:!1},e===t){let e=[t],s=t;for(;r.has(s);)e.unshift(s=r.get(s));yield{visited:Array.from(l),path:e,current:null,done:!0};return}for(let t of this.nodes[e].neighbors)if(i.has(t)){let i=s.get(e)+1;i<s.get(t)&&(s.set(t,i),r.set(t,e))}}yield{visited:Array.from(l),path:[],current:null,done:!0}}*astar(e,t){this.nodes[e];let s=this.nodes[t],r=e=>{let t=this.nodes[e];return Math.hypot(t.x-s.x,t.y-s.y)},i=new Set([e]),l=new Map,a=new Map;a.set(e,0);let n=new Map;n.set(e,r(e));let o=new Set;for(;i.size>0;){let e=-1,s=1/0;for(let t of i){let r=n.get(t)??1/0;r<s&&(s=r,e=t)}if(e===t){let e=[t],s=t;for(;l.has(s);)e.unshift(s=l.get(s));yield{visited:Array.from(o),path:e,current:null,done:!0};return}for(let t of(i.delete(e),o.add(e),yield{visited:Array.from(o),path:[],current:e,done:!1},this.nodes[e].neighbors)){let s=a.get(e)+Math.hypot(this.nodes[e].x-this.nodes[t].x,this.nodes[e].y-this.nodes[t].y);s<(a.get(t)??1/0)&&(l.set(t,e),a.set(t,s),n.set(t,s+r(t)),o.has(t)||i.add(t))}}yield{visited:Array.from(o),path:[],current:null,done:!0}}start(e){"bfs"===e?this.generator=this.bfs(0,this.nodes.length-1):"dfs"===e?this.generator=this.dfs(0,this.nodes.length-1):"dijkstra"===e?this.generator=this.dijkstra(0,this.nodes.length-1):"astar"===e&&(this.generator=this.astar(0,this.nodes.length-1))}step(){if(!this.generator)return null;let e=this.generator.next();return e.done?{visited:[],path:[],current:null,done:!0}:e.value}}function n(){let[e]=(0,s.useState)(()=>new a(30)),[r,i]=(0,s.useState)(null),[l,n]=(0,s.useState)(!1),[o,d]=(0,s.useState)("bfs"),[h,c]=(0,s.useState)(20),[u,g]=(0,s.useState)(!1),[x,f]=(0,s.useState)(null),[b,p]=(0,s.useState)(!1),[m,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{e.init(h),i(null)},[h]);let v=()=>{f(null)};return(0,s.useEffect)(()=>{if(!l)return;let t=setInterval(()=>{let t=e.step();t?(i(t),t.done&&n(!1)):n(!1)},100);return()=>clearInterval(t)},[l]),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-6 items-center bg-gray-800 p-4 rounded-xl border border-gray-700",children:[(0,t.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"bg-gray-900 border border-gray-600 rounded px-4 py-2 text-white",children:[(0,t.jsx)("option",{value:"bfs",children:"Breadth-First Search (BFS)"}),(0,t.jsx)("option",{value:"dfs",children:"Depth-First Search (DFS)"}),(0,t.jsx)("option",{value:"dijkstra",children:"Dijkstra's Algorithm"}),(0,t.jsx)("option",{value:"astar",children:"A* Search"})]}),(0,t.jsx)("button",{onClick:()=>{e.start(o),n(!0)},className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 rounded font-bold",disabled:l,children:l?"Searching...":"Start Search"}),(0,t.jsx)("button",{onClick:()=>{e.init(h),i(null),n(!1)},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"New Graph"})]}),(0,t.jsxs)("div",{className:"flex gap-6 mb-4 items-center bg-gray-800 px-4 py-2 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"text-sm text-gray-400",children:["Vertices: ",h]}),(0,t.jsx)("input",{type:"range",min:"5",max:"50",value:h,onChange:e=>c(parseInt(e.target.value)),className:"w-32 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:u,onChange:e=>g(e.target.checked),className:"w-4 h-4 rounded bg-gray-700 border-gray-500"}),(0,t.jsx)("label",{className:"text-sm text-gray-400",children:"Show Weights"})]})]}),(0,t.jsx)("div",{className:"flex-1 bg-black rounded-xl border border-gray-700 relative overflow-hidden",onMouseMove:t=>{if(null!==x){let s=t.currentTarget.getBoundingClientRect(),r=(t.clientX-s.left)/s.width*100,l=(t.clientY-s.top)/s.height*100;e.nodes[x].x=r,e.nodes[x].y=l,i(e=>e?{...e}:null)}},onMouseUp:v,onMouseLeave:v,children:(0,t.jsxs)("svg",{className:"w-full h-full",children:[e.nodes.map(s=>s.neighbors.map(r=>{let i=e.nodes[r];return i?(0,t.jsx)("line",{x1:`${s.x}%`,y1:`${s.y}%`,x2:`${i.x}%`,y2:`${i.y}%`,stroke:"#374151",strokeWidth:"2"},`${s.id}-${i.id}`):null})),u&&e.nodes.map(s=>s.neighbors.map(r=>{if(r<s.id)return null;let i=e.nodes[r],l=(s.x+i.x)/2,a=(s.y+i.y)/2;return(0,t.jsx)("text",{x:`${l}%`,y:`${a}%`,fill:"#6B7280",fontSize:"10",textAnchor:"middle",children:"1"},`w-${s.id}-${i.id}`)})),r?.path.map((s,i)=>{if(0===i)return null;let l=e.nodes[r.path[i-1]],a=e.nodes[s];return(0,t.jsx)("line",{x1:`${l.x}%`,y1:`${l.y}%`,x2:`${a.x}%`,y2:`${a.y}%`,stroke:"#10B981",strokeWidth:"4"},`path-${i}`)}),e.nodes.map(s=>{let l="#4B5563";return r?.visited.includes(s.id)&&(l="#3B82F6"),r?.current===s.id&&(l="#F59E0B"),r?.path.includes(s.id)&&(l="#10B981"),0===s.id&&(l="#EF4444"),s.id===e.nodes.length-1&&(l="#8B5CF6"),(0,t.jsx)("circle",{cx:`${s.x}%`,cy:`${s.y}%`,r:"1.5%",fill:l,stroke:"white",strokeWidth:"1",className:`cursor-pointer ${b&&m===s.id?"stroke-yellow-400 stroke-2":"stroke-white"}`,onMouseDown:t=>{var r;return r=s.id,void(t.stopPropagation(),b?null===m?y(r):m===r?y(null):(e.toggleEdge(m,r),y(null),i(null)):f(r))}},s.id)})]})})]})}class o{rows;cols;grid;current=null;stack=[];generator=null;constructor(e=20,t=20){this.rows=e,this.cols=t,this.grid=[],this.init()}init(){this.grid=[];for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++)this.grid.push({x:t,y:e,walls:[!0,!0,!0,!0],visited:!1});this.current=this.grid[0],this.current.visited=!0,this.stack=[],this.generator=this.generate()}index(e,t){return e<0||t<0||e>=this.cols||t>=this.rows?-1:e+t*this.cols}removeWalls(e,t){let s=e.x-t.x;1===s?(e.walls[3]=!1,t.walls[1]=!1):-1===s&&(e.walls[1]=!1,t.walls[3]=!1);let r=e.y-t.y;1===r?(e.walls[0]=!1,t.walls[2]=!1):-1===r&&(e.walls[2]=!1,t.walls[0]=!1)}*generate(){for(;;){let e=[],t=this.grid[this.index(this.current.x,this.current.y-1)],s=this.grid[this.index(this.current.x+1,this.current.y)],r=this.grid[this.index(this.current.x,this.current.y+1)],i=this.grid[this.index(this.current.x-1,this.current.y)];if(t&&!t.visited&&e.push(t),s&&!s.visited&&e.push(s),r&&!r.visited&&e.push(r),i&&!i.visited&&e.push(i),e.length>0){let t=e[Math.floor(Math.random()*e.length)];this.stack.push(this.current),this.removeWalls(this.current,t),this.current=t,this.current.visited=!0,yield this.current}else if(this.stack.length>0)this.current=this.stack.pop(),yield this.current;else break}}step(){this.generator&&this.generator.next()}}function d(){let e=(0,s.useRef)(null),[r]=(0,s.useState)(()=>new o(30,40)),[i,l]=(0,s.useState)(!1),[a,n]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[c,u]=(0,s.useState)("generate");(0,s.useEffect)(()=>{if(!i)return;let e=setInterval(()=>{r.step(),g(),0===r.stack.length&&r.current===r.grid[0]&&l(!1)},20);return()=>clearInterval(e)},[i]);let g=()=>{let t=e.current;if(!t)return;let s=t.getContext("2d");if(s){s.fillStyle="#111827",s.fillRect(0,0,t.width,t.height);for(let e=0;e<r.grid.length;e++){let t=r.grid[e],i=20*t.x,l=20*t.y;t.visited&&(s.fillStyle="#1F2937",s.fillRect(i,l,20,20)),r.current===t&&(s.fillStyle="#8B5CF6",s.fillRect(i,l,20,20)),a&&a.x===t.x&&a.y===t.y&&(s.fillStyle="#10B981",s.fillRect(i+4,l+4,12,12)),d&&d.x===t.x&&d.y===t.y&&(s.fillStyle="#EF4444",s.fillRect(i+4,l+4,12,12)),s.strokeStyle="#374151",s.lineWidth=2,s.beginPath(),t.walls[0]&&(s.moveTo(i,l),s.lineTo(i+20,l)),t.walls[1]&&(s.moveTo(i+20,l),s.lineTo(i+20,l+20)),t.walls[2]&&(s.moveTo(i+20,l+20),s.lineTo(i,l+20)),t.walls[3]&&(s.moveTo(i,l+20),s.lineTo(i,l)),s.stroke()}}};return(0,s.useEffect)(()=>{g()},[a,d,c]),(0,t.jsxs)("div",{className:"flex flex-col items-center h-full",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4 items-center",children:[(0,t.jsx)("button",{onClick:()=>{r.init(),n(null),h(null),l(!0)},className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 rounded font-bold text-white",children:"Generate Maze"}),(0,t.jsxs)("div",{className:"flex bg-gray-800 rounded p-1",children:[(0,t.jsx)("button",{onClick:()=>u("pick_start"),className:`px-3 py-1 rounded ${"pick_start"===c?"bg-green-600":"hover:bg-gray-700"}`,children:"Set Start"}),(0,t.jsx)("button",{onClick:()=>u("pick_end"),className:`px-3 py-1 rounded ${"pick_end"===c?"bg-red-600":"hover:bg-gray-700"}`,children:"Set End"})]})]}),(0,t.jsx)("canvas",{ref:e,width:800,height:600,className:"bg-gray-900 rounded border border-gray-700 shadow-xl cursor-crosshair",onClick:t=>{let s=e.current;if(!s)return;let i=s.getBoundingClientRect(),l=s.width/i.width,a=s.height/i.height,o=Math.floor((t.clientX-i.left)*l/20),d=Math.floor((t.clientY-i.top)*a/20);o>=0&&o<r.cols&&d>=0&&d<r.rows&&("pick_start"===c?n({x:o,y:d}):"pick_end"===c&&h({x:o,y:d})),g()}})]})}class h{nodes;edges;generator=null;log=[];constructor(){this.nodes=[{id:0,x:100,y:300,label:"S"},{id:1,x:300,y:150,label:"A"},{id:2,x:300,y:450,label:"B"},{id:3,x:500,y:150,label:"C"},{id:4,x:500,y:450,label:"D"},{id:5,x:700,y:300,label:"T"}],this.edges=[{id:"e1",source:0,target:1,capacity:10,flow:0},{id:"e2",source:0,target:2,capacity:10,flow:0},{id:"e3",source:1,target:2,capacity:2,flow:0},{id:"e4",source:1,target:3,capacity:4,flow:0},{id:"e5",source:1,target:4,capacity:8,flow:0},{id:"e6",source:2,target:4,capacity:9,flow:0},{id:"e7",source:3,target:5,capacity:10,flow:0},{id:"e8",source:4,target:3,capacity:6,flow:0},{id:"e9",source:4,target:5,capacity:10,flow:0}]}addNode(e,t){let s=this.nodes.length;this.nodes.push({id:s,x:e,y:t,label:String(s)})}addEdge(e,t,s){this.edges.push({id:`e-${Date.now()}`,source:e,target:t,capacity:s,flow:0})}resetFlow(){this.edges.forEach(e=>e.flow=0),this.log=[]}*maxFlow(){this.resetFlow();let e=this.nodes.length-1,t=0;for(;;){let s=new Map,r=[0],i=new Set([0]),l=!1;for(;r.length>0;){let t=r.shift();if(t===e){l=!0;break}for(let e of this.edges)e.source===t&&!i.has(e.target)&&e.capacity>e.flow&&(i.add(e.target),s.set(e.target,e),r.push(e.target))}if(!l)break;let a=1/0,n=e,o=[];for(;0!==n;){let e=s.get(n);a=Math.min(a,e.capacity-e.flow),o.push(e.id),n=e.source}for(n=e;0!==n;){let e=s.get(n);e.flow+=a,n=e.source}t+=a,this.log.push(`Augmented flow by ${a}. Total: ${t}`),yield{maxFlow:t,pathEdges:o}}this.log.push(`Max Flow calculation complete. Max Flow: ${t}`)}step(){return this.generator?this.generator.next():{done:!0}}}function c(){let[e]=(0,s.useState)(()=>new h),[r,i]=(0,s.useState)(!1),[l,a]=(0,s.useState)([]),[n,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(null),[u,g]=(0,s.useState)("view"),[x,f]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!r)return;let t=setInterval(()=>{let t=e.step();t&&!t.done?(o(t.value.pathEdges||[]),a([...e.log])):(i(!1),o([]))},500);return()=>clearInterval(t)},[r]),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4 items-center bg-gray-800 p-4 rounded-xl border border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-blue-400",children:"Network Flow (Max Flow)"}),(0,t.jsx)("button",{onClick:()=>{e.generator=e.maxFlow(),i(!0)},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded font-bold text-white",disabled:r,children:r?"Calculating...":"Run Max Flow"}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:["Source: S (0), Sink: T (",e.nodes.length-1,")"]})]}),(0,t.jsxs)("div",{className:"flex flex-1 gap-4 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-1 bg-black rounded-xl border border-gray-700 relative overflow-hidden",onMouseMove:t=>{if(null!==d){let s=t.currentTarget.getBoundingClientRect();e.nodes[d].x=t.clientX-s.left,e.nodes[d].y=t.clientY-s.top,a([...e.log])}},onMouseUp:()=>c(null),onMouseLeave:()=>c(null),children:(0,t.jsxs)("svg",{className:"w-full h-full",children:[(0,t.jsx)("defs",{children:(0,t.jsx)("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"28",refY:"3.5",orient:"auto",children:(0,t.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#4B5563"})})}),e.edges.map(s=>{let r=e.nodes[s.source],i=e.nodes[s.target],l=n.includes(s.id);return(0,t.jsxs)("g",{onClick:t=>{t.stopPropagation(),"edit_cap"===u&&(s.capacity=s.capacity%20+1,a([...e.log]))},className:"edit_cap"===u?"cursor-pointer hover:opacity-80":"",children:[(0,t.jsx)("line",{x1:r.x,y1:r.y,x2:i.x,y2:i.y,stroke:l?"#10B981":"#4B5563",strokeWidth:l?4:2,markerEnd:"url(#arrowhead)"}),(0,t.jsxs)("text",{x:(r.x+i.x)/2,y:(r.y+i.y)/2-5,fill:l?"#10B981":"#9CA3AF",fontSize:"12",textAnchor:"middle",className:"font-mono bg-black select-none",children:[s.flow,"/",s.capacity]})]},s.id)}),e.nodes.map(s=>(0,t.jsxs)("g",{transform:`translate(${s.x},${s.y})`,className:`cursor-pointer ${"add_edge"===u&&x===s.id?"stroke-yellow-400":"stroke-blue-500"}`,onMouseDown:t=>{var r;return r=s.id,void(t.stopPropagation(),"add_edge"===u?null===x?f(r):x!==r&&(e.addEdge(x,r,10),f(null),a([...e.log])):"view"===u&&c(r))},children:[(0,t.jsx)("circle",{r:"20",fill:"#1F2937",stroke:"#3B82F6",strokeWidth:"2"}),(0,t.jsx)("text",{dy:"5",textAnchor:"middle",fill:"white",fontWeight:"bold",children:s.label})]},s.id))]})}),(0,t.jsxs)("div",{className:"w-64 bg-gray-900 rounded-xl border border-gray-700 p-4 overflow-y-auto font-mono text-xs text-gray-300",children:[(0,t.jsx)("h3",{className:"font-bold text-white mb-2",children:"Log"}),l.map((e,s)=>(0,t.jsx)("div",{className:"mb-1 border-b border-gray-800 pb-1",children:e},s))]})]})]})}class u{size;dt;diff;visc;s;density;Vx;Vy;Vx0;Vy0;r;g;b;r0;g0;b0;obstacles;constructor(e,t,s,r){this.size=e,this.dt=t,this.diff=s,this.visc=r;const i=e*e;this.s=new Float32Array(i),this.density=new Float32Array(i),this.obstacles=new Uint8Array(i),this.Vx=new Float32Array(i),this.Vy=new Float32Array(i),this.Vx0=new Float32Array(i),this.Vy0=new Float32Array(i),this.r=new Float32Array(i),this.g=new Float32Array(i),this.b=new Float32Array(i),this.r0=new Float32Array(i),this.g0=new Float32Array(i),this.b0=new Float32Array(i)}addDensity(e,t,s,r){let i=this.IX(e,t);this.density[i]+=s,this.r[i]+=s*r.r,this.g[i]+=s*r.g,this.b[i]+=s*r.b}addVelocity(e,t,s,r){let i=this.IX(e,t);this.Vx[i]+=s,this.Vy[i]+=r}addObstacle(e,t){let s=this.IX(e,t);this.obstacles[s]=1,this.density[s]=0,this.Vx[s]=0,this.Vy[s]=0}step(){this.size;let e=this.visc,t=this.diff,s=this.dt,r=this.Vx,i=this.Vy,l=this.Vx0,a=this.Vy0,n=this.s,o=this.density;this.diffuse(1,l,r,e,s),this.diffuse(2,a,i,e,s),this.project(l,a,r,i),this.advect(1,r,l,l,a,s),this.advect(2,i,a,l,a,s),this.project(r,i,l,a),this.diffuse(0,n,o,t,s),this.advect(0,o,n,r,i,s),this.diffuse(0,this.r0,this.r,t,s),this.advect(0,this.r,this.r0,r,i,s),this.diffuse(0,this.g0,this.g,t,s),this.advect(0,this.g,this.g0,r,i,s),this.diffuse(0,this.b0,this.b,t,s),this.advect(0,this.b,this.b0,r,i,s)}IX(e,t){return e+t*this.size}diffuse(e,t,s,r,i){let l=i*r*(this.size-2)*(this.size-2);this.lin_solve(e,t,s,l,1+6*l)}lin_solve(e,t,s,r,i){let l=this.size;for(let a=0;a<4;a++){for(let e=1;e<l-1;e++)for(let a=1;a<l-1;a++){let l=this.IX(a,e);if(this.obstacles[l]){t[l]=0;continue}t[l]=(s[l]+r*(t[this.IX(a+1,e)]+t[this.IX(a-1,e)]+t[this.IX(a,e+1)]+t[this.IX(a,e-1)]))/i}this.set_bnd(e,t)}}project(e,t,s,r){let i=this.size;for(let l=1;l<i-1;l++)for(let a=1;a<i-1;a++)r[this.IX(a,l)]=-.5*(e[this.IX(a+1,l)]-e[this.IX(a-1,l)]+t[this.IX(a,l+1)]-t[this.IX(a,l-1)])/i,s[this.IX(a,l)]=0;this.set_bnd(0,r),this.set_bnd(0,s),this.lin_solve(0,s,r,1,6);for(let r=1;r<i-1;r++)for(let l=1;l<i-1;l++)e[this.IX(l,r)]-=.5*(s[this.IX(l+1,r)]-s[this.IX(l-1,r)])*i,t[this.IX(l,r)]-=.5*(s[this.IX(l,r+1)]-s[this.IX(l,r-1)])*i;this.set_bnd(1,e),this.set_bnd(2,t)}advect(e,t,s,r,i,l){let a,n,o,d,h=this.size,c=l*(h-2);for(let e=1;e<h-1;e++)for(let l=1;l<h-1;l++){let u=l-c*r[this.IX(l,e)],g=e-c*i[this.IX(l,e)];u<.5&&(u=.5),u>h+.5&&(u=h+.5),n=(a=Math.floor(u))+1,g<.5&&(g=.5),g>h+.5&&(g=h+.5),d=(o=Math.floor(g))+1;let x=u-a,f=1-x,b=g-o,p=1-b;t[this.IX(l,e)]=f*(p*s[this.IX(a,o)]+b*s[this.IX(a,d)])+x*(p*s[this.IX(n,o)]+b*s[this.IX(n,d)])}this.set_bnd(e,t)}set_bnd(e,t){let s=this.size;for(let r=1;r<s-1;r++)t[this.IX(r,0)]=2===e?-t[this.IX(r,1)]:t[this.IX(r,1)],t[this.IX(r,s-1)]=2===e?-t[this.IX(r,s-2)]:t[this.IX(r,s-2)];for(let r=1;r<s-1;r++)t[this.IX(0,r)]=1===e?-t[this.IX(1,r)]:t[this.IX(1,r)],t[this.IX(s-1,r)]=1===e?-t[this.IX(s-2,r)]:t[this.IX(s-2,r)];t[this.IX(0,0)]=.5*(t[this.IX(1,0)]+t[this.IX(0,1)]),t[this.IX(0,s-1)]=.5*(t[this.IX(1,s-1)]+t[this.IX(0,s-2)]),t[this.IX(s-1,0)]=.5*(t[this.IX(s-2,0)]+t[this.IX(s-1,1)]),t[this.IX(s-1,s-1)]=.5*(t[this.IX(s-2,s-1)]+t[this.IX(s-1,s-2)])}}function g(){let e=(0,s.useRef)(null),[r]=(0,s.useState)(()=>new u(64,.1,1e-4,1e-4)),[i,l]=(0,s.useState)(!1),[a,n]=(0,s.useState)("dye"),[o,d]=(0,s.useState)(1e-4),[h,c]=(0,s.useState)({r:1,g:1,b:1}),[g,x]=(0,s.useState)(!1),[f,b]=(0,s.useState)(5);(0,s.useEffect)(()=>{if(g){let e=setInterval(()=>{let e=.002*Date.now();c({r:.5*Math.sin(e)+.5,g:.5*Math.sin(e+2)+.5,b:.5*Math.sin(e+4)+.5})},50);return()=>clearInterval(e)}},[g]),(0,s.useEffect)(()=>{r.visc=o},[o]),(0,s.useEffect)(()=>{if(!i)return;let t=e.current?.getContext("2d");if(!t)return;let s=setInterval(()=>{r.step(),p(t)},30);return()=>clearInterval(s)},[i]);let p=e=>{let t=e.canvas.width,s=e.canvas.height,i=t/r.size,l=s/r.size;e.fillStyle="black",e.fillRect(0,0,t,s);for(let t=0;t<r.size;t++)for(let s=0;s<r.size;s++){let a=r.IX(t,s);if(r.obstacles[a]){e.fillStyle="#4B5563",e.fillRect(t*i,s*l,i+1,l+1);continue}if(r.density[a]>.01){let n=Math.min(255,Math.floor(20*r.r[a])),o=Math.min(255,Math.floor(20*r.g[a])),d=Math.min(255,Math.floor(20*r.b[a]));e.fillStyle=`rgb(${n},${o},${d})`,e.fillRect(t*i,s*l,i+1,l+1)}}};return(0,t.jsxs)("div",{className:"flex flex-col h-full items-center",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4 items-center bg-gray-800 p-3 rounded-xl border border-gray-700",children:[(0,t.jsx)("button",{onClick:()=>l(!i),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded font-bold",children:i?"Pause":"Start"}),(0,t.jsxs)("div",{className:"flex gap-2 bg-gray-700 p-1 rounded",children:[(0,t.jsx)("button",{onClick:()=>n("dye"),className:`px-3 py-1 rounded ${"dye"===a?"bg-blue-500 text-white":"text-gray-300"}`,children:"ðŸ’§ Dye"}),(0,t.jsx)("button",{onClick:()=>n("obstacle"),className:`px-3 py-1 rounded ${"obstacle"===a?"bg-gray-500 text-white":"text-gray-300"}`,children:"ðŸ§± Wall"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-32",children:[(0,t.jsx)("label",{className:"text-xs text-gray-400",children:"Viscosity"}),(0,t.jsx)("input",{type:"range",min:"0",max:"0.01",step:"0.0001",value:o,onChange:e=>d(parseFloat(e.target.value)),className:"h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-32",children:[(0,t.jsx)("label",{className:"text-xs text-gray-400",children:"Brush Size"}),(0,t.jsx)("input",{type:"range",min:"1",max:"20",value:f,onChange:e=>b(parseFloat(e.target.value)),className:"h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),(0,t.jsx)("button",{onClick:()=>x(!g),className:`px-3 py-1 rounded ${g?"bg-gradient-to-r from-red-500 via-green-500 to-blue-500 text-white":"bg-gray-700 text-gray-300"}`,children:"ðŸŒˆ Rainbow"}),(0,t.jsx)("div",{className:"flex gap-2",children:[{r:1,g:0,b:0},{r:0,g:1,b:0},{r:0,g:0,b:1},{r:1,g:1,b:1},{r:1,g:.5,b:0}].map((e,s)=>(0,t.jsx)("button",{onClick:()=>c(e),className:`w-8 h-8 rounded-full border-2 ${h.r===e.r&&h.g===e.g?"border-white scale-110":"border-transparent"}`,style:{backgroundColor:`rgb(${255*e.r},${255*e.g},${255*e.b})`}},s))})]}),(0,t.jsx)("canvas",{ref:e,width:512,height:512,className:"bg-black rounded-lg shadow-2xl cursor-crosshair touch-none",onMouseMove:t=>{let s=e.current;if(!s)return;let l=s.getBoundingClientRect(),a=Math.floor((t.clientX-l.left)/(l.width/r.size)),n=Math.floor((t.clientY-l.top)/(l.height/r.size));a>=0&&a<r.size&&n>=0&&n<r.size&&(r.addDensity(a,n,f,h),r.addVelocity(a,n,(Math.random()-.5)*10,(Math.random()-.5)*10),i||p(s.getContext("2d")))}})]})}class x{state;constructor(){this.state={year:0,temp:210,pressure:.6,oxygen:.1,water:10,biomass:0}}step(e){this.state.year+=1;let t=this.state.pressure/100*.1;return this.state.temp+=t,e.nuke_poles&&(this.state.temp+=5,this.state.pressure+=1,this.state.water+=2),e.solar_shade&&(this.state.temp-=2),e.plant_bacteria&&this.state.temp>273&&this.state.temp<320&&this.state.water>5&&(this.state.biomass+=1,this.state.oxygen+=.1),this.state.temp-=.5,this.state.temp=Math.max(0,this.state.temp),this.state.pressure=Math.max(0,this.state.pressure),this.state.oxygen=Math.max(0,Math.min(100,this.state.oxygen)),this.state.water=Math.max(0,Math.min(100,this.state.water)),this.state.biomass=Math.max(0,this.state.biomass),{...this.state}}}var f=e.i(78323);function b(){let[e]=(0,s.useState)(()=>new x),[r,i]=(0,s.useState)(e.state),[l,a]=(0,s.useState)({nuke_poles:!1,solar_shade:!1,plant_bacteria:!1});(0,s.useEffect)(()=>{let t=setInterval(()=>{i(e.step(l))},500);return()=>clearInterval(t)},[l]);let n=e=>{a(t=>({...t,[e]:!t[e]}))};return(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 h-full",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 bg-black rounded-xl border border-gray-700 overflow-hidden relative",children:[(0,t.jsx)(f.default,{state:r}),(0,t.jsxs)("div",{className:"absolute top-4 left-4 text-white/50 font-mono",children:["Year: ",r.year]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsx)(p,{label:"Temp",value:`${r.temp.toFixed(1)} K`,color:r.temp>273?"text-green-400":"text-blue-400"}),(0,t.jsx)(p,{label:"Pressure",value:`${r.pressure.toFixed(2)} kPa`}),(0,t.jsx)(p,{label:"Oxygen",value:`${r.oxygen.toFixed(1)} %`}),(0,t.jsx)(p,{label:"Water",value:`${r.water.toFixed(1)} %`,color:"text-blue-400"}),(0,t.jsx)(p,{label:"Biomass",value:`${r.biomass.toFixed(1)}`,color:"text-green-400"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-purple-400",children:"Planetary Engineering"}),(0,t.jsx)(m,{active:l.nuke_poles,onClick:()=>n("nuke_poles"),icon:"â˜¢ï¸",title:"Nuke Polar Caps",desc:"Release CO2 and Water vapor to thicken atmosphere.",color:"red"}),(0,t.jsx)(m,{active:l.solar_shade,onClick:()=>n("solar_shade"),icon:"ðŸ›°ï¸",title:"Solar Shades",desc:"Deploy orbital mirrors to block sunlight.",color:"blue"}),(0,t.jsx)(m,{active:l.plant_bacteria,onClick:()=>n("plant_bacteria"),icon:"ðŸ¦ ",title:"Seed Bacteria",desc:"Introduce extremophiles to convert CO2 to Oxygen.",color:"green"})]})]})}function p({label:e,value:s,color:r="text-white"}){return(0,t.jsxs)("div",{className:"bg-gray-800 p-3 rounded text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:e}),(0,t.jsx)("div",{className:`text-lg font-bold ${r}`,children:s})]})}function m({active:e,onClick:s,icon:r,title:i,desc:l,color:a}){return(0,t.jsxs)("button",{onClick:s,className:`w-full p-4 rounded-xl border text-left transition-all ${e?({red:"border-red-500 bg-red-900/20 text-red-100",blue:"border-blue-500 bg-blue-900/20 text-blue-100",green:"border-green-500 bg-green-900/20 text-green-100"})[a]:"border-gray-700 bg-gray-800 hover:bg-gray-700"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,t.jsx)("span",{className:"text-2xl",children:r}),(0,t.jsx)("span",{className:"font-bold text-lg",children:i})]}),(0,t.jsx)("p",{className:"text-sm opacity-70 ml-10",children:l})]})}var y=e.i(75056),v=e.i(49774),w=e.i(30297),j=e.i(93021);class S{bodies;G;dt;constructor(e=100){this.G=.1,this.dt=.01,this.bodies=[],this.init(e)}init(e){this.bodies=[],this.bodies.push({x:0,y:0,z:0,vx:0,vy:0,vz:0,mass:1e4,radius:5,color:"#FFD700",trail:[]});for(let t=0;t<e;t++){let e=20+80*Math.random(),t=Math.random()*Math.PI*2,s=Math.sqrt(1e4/e);this.bodies.push({x:Math.cos(t)*e,y:Math.sin(t)*e,z:(Math.random()-.5)*5,vx:-Math.sin(t)*s,vy:Math.cos(t)*s,vz:(Math.random()-.5)*.1,mass:1+5*Math.random(),radius:1+Math.random(),color:`hsl(${360*Math.random()}, 70%, 50%)`,trail:[]})}}solarSystem(){this.bodies=[],this.bodies.push({x:0,y:0,z:0,vx:0,vy:0,vz:0,mass:3e4,radius:6,color:"#FFD700",trail:[]}),this.bodies.push({x:10,y:0,z:0,vx:0,vy:Math.sqrt(3e3),vz:0,mass:1,radius:.8,color:"#A5A5A5",trail:[]}),this.bodies.push({x:15,y:0,z:0,vx:0,vy:Math.sqrt(2e3),vz:0,mass:2,radius:1.2,color:"#E3BB76",trail:[]}),this.bodies.push({x:20,y:0,z:0,vx:0,vy:Math.sqrt(1500),vz:0,mass:2,radius:1.3,color:"#22A6B3",trail:[]}),this.bodies.push({x:25,y:0,z:0,vx:0,vy:Math.sqrt(1200),vz:0,mass:1.5,radius:1,color:"#EB4D4B",trail:[]}),this.bodies.push({x:40,y:0,z:0,vx:0,vy:Math.sqrt(750),vz:0,mass:50,radius:3.5,color:"#F0932B",trail:[]})}step(){let e=this.bodies.length;for(let t=0;t<e;t++){let s=0,r=0,i=0;for(let l=0;l<e;l++){if(t===l)continue;let e=this.bodies[l].x-this.bodies[t].x,a=this.bodies[l].y-this.bodies[t].y,n=this.bodies[l].z-this.bodies[t].z,o=e*e+a*a+n*n,d=Math.sqrt(o);if(d<1)continue;let h=this.G*this.bodies[t].mass*this.bodies[l].mass/o;s+=h*e/d,r+=h*a/d,i+=h*n/d}this.bodies[t].vx+=s/this.bodies[t].mass*this.dt,this.bodies[t].vy+=r/this.bodies[t].mass*this.dt,this.bodies[t].vz+=i/this.bodies[t].mass*this.dt}for(let t=0;t<e;t++)this.bodies[t].x+=this.bodies[t].vx*this.dt,this.bodies[t].y+=this.bodies[t].vy*this.dt,this.bodies[t].z+=this.bodies[t].vz*this.dt,.1>Math.random()&&(this.bodies[t].trail.push([this.bodies[t].x,this.bodies[t].y,this.bodies[t].z]),this.bodies[t].trail.length>50&&this.bodies[t].trail.shift())}}var N=e.i(90072);function M(){let[e]=(0,s.useState)(()=>new S(200)),[r,i]=(0,s.useState)(e.bodies),[l,a]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{if(!l)return;let t=setInterval(()=>{e.step()},16);return()=>clearInterval(t)},[l]),(0,t.jsxs)("div",{className:"h-full w-full bg-black relative",children:[(0,t.jsxs)("div",{className:"absolute top-4 left-4 z-10 flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>a(!l),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded text-white font-bold",children:l?"Pause":"Resume"}),(0,t.jsx)("button",{onClick:()=>e.init(200),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"Reset"}),(0,t.jsx)("button",{onClick:()=>e.solarSystem(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 rounded text-white",children:"Solar System"})]}),(0,t.jsxs)(y.Canvas,{camera:{position:[0,40,60],fov:45},children:[(0,t.jsx)("color",{attach:"background",args:["#050505"]}),(0,t.jsx)("ambientLight",{intensity:.5}),(0,t.jsx)("pointLight",{position:[0,0,0],intensity:2,color:"#ffcc00"})," ",(0,t.jsx)(j.Stars,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1}),(0,t.jsx)(k,{sim:e}),(0,t.jsx)(w.OrbitControls,{})]})]})}function k({sim:e}){let r=(0,s.useRef)(null),i=(0,s.useMemo)(()=>new N.Object3D,[]);return(0,v.useFrame)(()=>{r.current&&(e.step(),e.bodies.forEach((e,t)=>{i.position.set(e.x,e.y,e.z),i.scale.set(e.radius,e.radius,e.radius),i.updateMatrix(),r.current.setMatrixAt(t,i.matrix),r.current.setColorAt(t,new N.Color(e.color))}),r.current.instanceMatrix.needsUpdate=!0,r.current.instanceColor&&(r.current.instanceColor.needsUpdate=!0))}),(0,t.jsxs)("group",{children:[(0,t.jsxs)("instancedMesh",{ref:r,args:[void 0,void 0,e.bodies.length],children:[(0,t.jsx)("sphereGeometry",{args:[1,16,16]}),(0,t.jsx)("meshStandardMaterial",{roughness:.5,metalness:.5})]}),(0,t.jsx)(I,{bodies:e.bodies})]})}function I({bodies:e}){return(0,t.jsx)("group",{children:e.slice(0,10).map((e,s)=>(0,t.jsx)(z,{body:e,color:e.color},s))})}function z({body:e,color:r}){let i=(0,s.useRef)(null),[l]=(0,s.useState)(()=>new Float32Array(300)),[a,n]=(0,s.useState)(0);return(0,v.useFrame)(()=>{if(i.current){for(let e=299;e>2;e--)l[e]=l[e-3];l[0]=e.x,l[1]=e.y,l[2]=e.z,i.current.geometry.attributes.position.needsUpdate=!0}}),(0,t.jsxs)("line",{ref:i,children:[(0,t.jsx)("bufferGeometry",{children:(0,t.jsx)("bufferAttribute",{attach:"attributes-position",count:100,array:l,itemSize:3,args:[l,3]})}),(0,t.jsx)("lineBasicMaterial",{color:r,opacity:.5,transparent:!0})]})}class C{rows;cols;grid;constructor(e=50,t=50){this.rows=e,this.cols=t,this.grid=this.createGrid(),this.randomize()}createGrid(){return Array(this.rows).fill(0).map(()=>Array(this.cols).fill(0))}randomize(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++)this.grid[e][t]=+(Math.random()>.8)}gliderGun(){for(let e=0;e<this.rows;e++)this.grid[e].fill(0);[[0,4],[0,5],[1,4],[1,5],[10,4],[10,5],[10,6],[11,3],[11,7],[12,2],[12,8],[13,2],[13,8],[14,5],[15,3],[15,7],[16,4],[16,5],[16,6],[17,5],[20,2],[20,3],[20,4],[21,2],[21,3],[21,4],[22,1],[22,5],[24,0],[24,1],[24,5],[24,6],[34,2],[34,3],[35,2],[35,3]].forEach(([e,t])=>{t+5<this.rows&&e+5<this.cols&&(this.grid[t+5][e+5]=1)})}step(){let e=this.createGrid();for(let t=0;t<this.rows;t++)for(let s=0;s<this.cols;s++){let r=this.countNeighbors(t,s);1===this.grid[t][s]?e[t][s]=+(2===r||3===r):e[t][s]=+(3===r)}this.grid=e}countNeighbors(e,t){let s=0;for(let r=-1;r<2;r++)for(let i=-1;i<2;i++){let l=(e+r+this.rows)%this.rows,a=(t+i+this.cols)%this.cols;s+=this.grid[l][a]}return s-this.grid[e][t]}}function X(){let e=(0,s.useRef)(null),[r]=(0,s.useState)(()=>new C(60,100)),[i,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!i)return;let e=setInterval(()=>{r.step(),a()},100);return()=>clearInterval(e)},[i]);let a=()=>{let t=e.current;if(!t)return;let s=t.getContext("2d");if(!s)return;let i=t.width,l=t.height,a=i/r.cols,n=l/r.rows;s.fillStyle="#111827",s.fillRect(0,0,i,l),s.fillStyle="#10B981";for(let e=0;e<r.rows;e++)for(let t=0;t<r.cols;t++)1===r.grid[e][t]&&s.fillRect(t*a,e*n,a-1,n-1)};return(0,s.useEffect)(()=>{a()},[]),(0,t.jsxs)("div",{className:"flex flex-col items-center h-full",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,t.jsx)("button",{onClick:()=>l(!i),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded font-bold",children:i?"Pause":"Start"}),(0,t.jsx)("button",{onClick:()=>{r.randomize(),a()},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Randomize"}),(0,t.jsx)("button",{onClick:()=>{r.gliderGun(),a()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded",children:"Glider Gun"})]}),(0,t.jsx)("canvas",{ref:e,width:1e3,height:600,className:"bg-gray-900 rounded border border-gray-700 cursor-pointer shadow-lg",onClick:t=>{let s=e.current;if(!s)return;let i=s.getBoundingClientRect(),l=Math.floor((t.clientY-i.top)/(i.height/r.rows)),n=Math.floor((t.clientX-i.left)/(i.width/r.cols));l>=0&&l<r.rows&&n>=0&&n<r.cols&&(r.grid[l][n]=+!r.grid[l][n],a())}})]})}class F{size;u;u_prev;u_next;damping;c;k;mode;constructor(e=100){this.size=e,this.u=new Float32Array(e*e),this.u_prev=new Float32Array(e*e),this.u_next=new Float32Array(e*e),this.damping=.99,this.c=.5,this.k=.1,this.mode="wave"}step(){let e=this.size;for(let t=1;t<e-1;t++)for(let s=1;s<e-1;s++){let r=t*e+s,i=this.u[(t+1)*e+s]+this.u[(t-1)*e+s]+this.u[t*e+(s+1)]+this.u[t*e+(s-1)]-4*this.u[r];"wave"===this.mode?this.u_next[r]=(2*this.u[r]-this.u_prev[r]+this.c*this.c*i)*this.damping:this.u_next[r]=this.u[r]+this.k*i}let t=this.u_prev;this.u_prev=this.u,this.u=this.u_next,this.u_next=t}disturb(e,t,s){e>1&&e<this.size-1&&t>1&&t<this.size-1&&(this.u[e*this.size+t]+=s)}}function A(){let e=(0,s.useRef)(null),[r]=(0,s.useState)(()=>new F(100)),[i,l]=(0,s.useState)(!0),[a,n]=(0,s.useState)(.99);(0,s.useEffect)(()=>{r.damping=a},[a]),(0,s.useEffect)(()=>{if(!i)return;let e=setInterval(()=>{r.step(),o()},30);return()=>clearInterval(e)},[i]);let o=()=>{let t=e.current;if(!t)return;let s=t.getContext("2d");if(!s)return;let i=t.width,l=t.height,a=s.createImageData(i,l),n=a.data;for(let e=0;e<r.size;e++)for(let t=0;t<r.size;t++){let s=r.u[e*r.size+t],l=Math.max(0,Math.min(255,255*s)),a=Math.max(0,Math.min(255,-(255*s)));for(let s=0;s<4;s++)for(let r=0;r<4;r++){let o=((4*e+s)*i+(4*t+r))*4;n[o]=l,n[o+1]=0,n[o+2]=a,n[o+3]=255}}s.putImageData(a,0,0)};return(0,t.jsxs)("div",{className:"flex flex-col items-center h-full",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4 items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-blue-400",children:"Physics Engine"}),(0,t.jsxs)("div",{className:"flex bg-gray-800 rounded p-1",children:[(0,t.jsx)("button",{onClick:()=>{r.mode="wave",r.u.fill(0),r.u_prev.fill(0)},className:`px-3 py-1 rounded ${"wave"===r.mode?"bg-blue-600":"hover:bg-gray-700"}`,children:"Wave"}),(0,t.jsx)("button",{onClick:()=>{r.mode="heat",r.u.fill(0)},className:`px-3 py-1 rounded ${"heat"===r.mode?"bg-red-600":"hover:bg-gray-700"}`,children:"Heat"})]})]}),(0,t.jsx)("p",{className:"mb-4 text-gray-400",children:"wave"===r.mode?"Move mouse to create ripples.":"Move mouse to add heat."}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("label",{className:"text-xs text-gray-400",children:"Damping"}),(0,t.jsx)("input",{type:"range",min:"0.9",max:"1.0",step:"0.001",value:a,onChange:e=>n(parseFloat(e.target.value)),className:"w-32 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),(0,t.jsx)("canvas",{ref:e,width:400,height:400,className:"bg-black rounded border border-gray-700 cursor-crosshair shadow-2xl",onMouseMove:t=>{let s=e.current;if(!s)return;let i=s.getBoundingClientRect(),l=Math.floor((t.clientY-i.top)/4),a=Math.floor((t.clientX-i.left)/4);r.disturb(l,a,5)}})]})}function $(){let[e,i]=(0,s.useState)("sorting");return(0,t.jsx)(r,{activeSim:e,setActiveSim:i,children:(()=>{switch(e){case"sorting":return(0,t.jsx)(l,{});case"graph":return(0,t.jsx)(n,{});case"maze":return(0,t.jsx)(d,{});case"flow":return(0,t.jsx)(c,{});case"fluid":return(0,t.jsx)(g,{});case"terraforming":return(0,t.jsx)(b,{});case"automata":return(0,t.jsx)(X,{});case"physics":return(0,t.jsx)(A,{});case"universe":return(0,t.jsx)(M,{});default:return(0,t.jsx)("div",{children:"Select a simulation"})}})()})}e.s(["default",()=>$],31713)}]);